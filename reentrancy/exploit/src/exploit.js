const Web3 = require('web3');
const HDWalletProvider = require("@truffle/hdwallet-provider");
const walletArtifact = require('./../build/contracts/Wallet.json');

require('dotenv').config();

let provider = new HDWalletProvider(process.env.METAMASK_SEED, `https://rinkeby.infura.io/v3/${process.env.INFURA_KEY}`);
let web3 = new Web3(provider);

const WALLET2_ADDR = "0x73Cbd147279B68b32AE5eFA879bc522eCFe156f2";
const wallet2Instance = new web3.eth.Contract(walletArtifact.abi, WALLET2_ADDR);

(async () => {
    await wallet2Instance.methods.withdraw().send({from: process.env.METAMASK_ACCOUNT, gas: 600000, gasPrice: web3.utils.toWei('100','gwei')}, 
    (error, txHash) => {console.log(`withdraw from wallet2: ${txHash}`)});

    process.exit(0);
})();
